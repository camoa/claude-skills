---
name: design-system-converter
description: Use when user says "convert design system", "convert to drupal", "convert to radix", "html to drupal", "generate theme", "design to code", "convert html", "radix theme", "SDC components", "layout builder", or wants to convert a design system into production code. Routes to the appropriate converter target.
version: 1.1.0
model: sonnet
---

# Design System Converter

Route design system conversion requests to the appropriate target-specific workflow.

## Trigger Phrases

- "convert design system" / "design to code"
- "convert to drupal" / "convert to radix" / "html to drupal"
- "generate theme" / "radix theme"
- "convert html" / "SDC components" / "layout builder"
- NOT for: General design questions, HTML page creation, brand extraction

## Available Targets

| Target | Command | Status |
|--------|---------|--------|
| Drupal Radix/SDC (guided) | `/convert-to-radix` | Available |
| Drupal Radix/SDC (quick) | `/convert-to-radix-quick` | Available |
| Canvas | -- | Planned |
| Next.js | -- | Planned |

## Architecture

The converter uses a design-system-first flow with two-layer architecture:

1. **Site inventory** (existing theme, views, content types, settings) -- overlay mode for existing sites
2. **Shared analyzer** (`html-to-radix-analyzer`): Parses HTML metadata comments, classifies patterns, extracts design tokens, inventories Drupal backend. Target-agnostic output.
3. **Target-specific generators** (e.g., `radix-sdc-generator`): Consumes analysis output and generates code per page in atomic order (tokens → atoms → molecules → organisms). Uses Radix CLI for scaffolding when available.

**v1.1.0 key changes**: Radix CLI scaffolding, existing site inventory, competing agents for ambiguous classifications, page-by-page generation, entity-level field access, two-pass config imports, no Paragraphs defaults.

## External Guide Ecosystem

Domain knowledge lives in external guides at `https://camoa.github.io/dev-guides/`. The converter is a thin workflow layer that orchestrates analysis + generation.

**Guide referencing protocol:**
1. WebFetch `https://camoa.github.io/dev-guides/llms.txt` at start of conversion to discover current guide pages
2. WebFetch specific pages on demand as the conversion progresses
3. Never hardcode page URLs -- always discover via llms.txt

**Key guide sections:**
- `design-systems/recognition/` -- Token identification, classification (used by analyzer)
- `design-systems/bootstrap/` -- Token-to-Bootstrap SCSS mapping (used by generator)
- `design-systems/radix-components/` -- Component selection, full API reference (used by both)
- `design-systems/radix-sdc/` -- Sub-theme architecture, SDC development, LB integration (used by generator)
- `drupal/sdc/` -- YAML schema, props/slots, SCSS scoping (used by generator)

## Commands

Route user requests to the appropriate command:

| User Intent | Command |
|-------------|---------|
| Convert with full control | `/convert-to-radix` |
| Quick convert with defaults | `/convert-to-radix-quick` |

## Underlying Skills

| Skill | When to Use |
|-------|-------------|
| **html-to-radix-analyzer** | Analyze HTML metadata for conversion (bundled) |
| **radix-sdc-generator** | Generate Radix sub-theme with SDC components (bundled) |

## Input Sources

Currently supported:
- **HTML with metadata comments**: Pages generated by brand-content-design plugin with `<!-- component: -->`, `<!-- prop: -->`, `<!-- slot: -->` annotations

Planned:
- **Figma designs**: Direct Figma-to-code conversion
- **Raw HTML**: Inference-based analysis without metadata comments

## Examples

### Full conversion with existing Drupal site
User: "Convert my design system to a Radix theme for my Drupal site at ~/projects/mysite"
Route to: `/convert-to-radix` -- guided mode discovers existing theme, content types, and views before generating.

### Quick conversion for a new project
User: "Quick-convert these HTML pages to Drupal"
Route to: `/convert-to-radix-quick` -- auto-resolves all ambiguities, generates complete green-field theme.

### Ambiguous request
User: "Generate SDC components from my design"
Route to: `/convert-to-radix` -- default to guided mode when the user hasn't specified quick.

## Troubleshooting

| Issue | Cause | Solution |
|-------|-------|----------|
| No HTML pages found | Missing metadata comments | Generate pages with `/html-page` or `/html-page-quick` first |
| No brand-philosophy.md | Brand project not initialized | Run `/brand-init` to set up the project |
| WebFetch fails for guides | Network issue or guides site down | Check connectivity; the converter cannot proceed without external guides |
| Wrong command routed | Ambiguous user intent | Ask user: "Would you like guided mode (more control) or quick mode (automatic)?" |
